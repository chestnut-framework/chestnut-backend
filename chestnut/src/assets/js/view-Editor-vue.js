(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["view-Editor-vue"],{

/***/ "./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/Editor.vue?vue&type=script&lang=js&":
/*!**********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/views/Editor.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Volumes_Out_codes_node_chestnut_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _Volumes_Out_codes_node_chestnut_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Volumes_Out_codes_node_chestnut_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_resource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/resource */ \"./src/api/resource.js\");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components */ \"./src/components/index.js\");\n/* harmony import */ var _lib_deepObject__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/deepObject */ \"./src/lib/deepObject.js\");\n/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! vuex */ \"./node_modules/vuex/dist/vuex.esm.js\");\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\nfunction flatten(obj, columns) {\n  var flatten = {};\n  columns.forEach(function (el) {\n    var value = Object(_lib_deepObject__WEBPACK_IMPORTED_MODULE_3__[\"deepFind\"])(obj, el.name);\n    flatten[el.name] = value;\n  });\n  return flatten;\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  props: [\"api\", \"breadcrumb\"],\n  components: {\n    \"c-image\": _components__WEBPACK_IMPORTED_MODULE_2__[\"Image\"],\n    \"c-select\": _components__WEBPACK_IMPORTED_MODULE_2__[\"Select\"],\n    \"c-checkbox\": _components__WEBPACK_IMPORTED_MODULE_2__[\"Checkbox\"],\n    \"c-editor\": _components__WEBPACK_IMPORTED_MODULE_2__[\"Editor\"],\n    \"c-file\": _components__WEBPACK_IMPORTED_MODULE_2__[\"File\"]\n  },\n  data: function data() {\n    return {\n      columns: [],\n      item: undefined,\n      mode: \"create\"\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_Volumes_Out_codes_node_chestnut_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n      var columns;\n      return _Volumes_Out_codes_node_chestnut_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (_api_resource__WEBPACK_IMPORTED_MODULE_1__[\"default\"].apiBase === undefined) {\n                _api_resource__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setApiBase(_this.api);\n              }\n\n              _this.mode = _this.$route.params.id !== undefined ? \"edit\" : \"create\";\n              columns = _this.$store.getters.columns(_this.api);\n\n              _this.updateBreadcrumb();\n\n              if (!columns) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.t0 = columns;\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.next = 10;\n              return _api_resource__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getColumns().then(function (res) {\n                return res.data;\n              });\n\n            case 10:\n              _context.t0 = _context.sent;\n\n            case 11:\n              columns = _context.t0;\n              _this.columns = columns.filter(function (v) {\n                return !v.hidden[_this.mode];\n              });\n\n              if (_this.mode == \"edit\") {\n                _this.getItem();\n              } else {\n                _this.item = {};\n\n                _this.columns.map(function (v) {\n                  v.attrs.readonly = false;\n                  return v;\n                });\n              }\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  watch: {\n    $route: function $route() {\n      this.getColumns();\n      this.updateBreadcrumb();\n    }\n  },\n  methods: _objectSpread(_objectSpread({}, Object(vuex__WEBPACK_IMPORTED_MODULE_4__[\"mapActions\"])([\"updateColumn\", \"updateResource\", \"clearResource\"])), {}, {\n    updateBreadcrumb: function updateBreadcrumb() {\n      var breadcrumb = this.breadcrumb;\n      breadcrumb.text = this.$t(this.mode) + breadcrumb.text;\n      this.$emit(\"children-update\", breadcrumb, 2);\n    },\n    getColumns: function getColumns() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_Volumes_Out_codes_node_chestnut_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {\n        var columns;\n        return _Volumes_Out_codes_node_chestnut_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                columns = _this2.$store.getters.columns(_this2.api);\n\n                if (!columns) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                _context2.t0 = columns;\n                _context2.next = 8;\n                break;\n\n              case 5:\n                _context2.next = 7;\n                return _api_resource__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getColumns().then(function (res) {\n                  return res.data;\n                });\n\n              case 7:\n                _context2.t0 = _context2.sent;\n\n              case 8:\n                columns = _context2.t0;\n                _this2.columns = columns;\n\n                _this2.updateColumn({\n                  key: _this2.api,\n                  columns: columns\n                });\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    save: function save() {\n      var _this3 = this;\n\n      _api_resource__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save(this.item).then(function (res) {\n        if (res.code == 200) {\n          _this3.$message.success({\n            showClose: true,\n            message: res.message\n          });\n\n          _this3.back(_this3.api);\n        }\n      });\n    },\n    getItem: function getItem() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_Volumes_Out_codes_node_chestnut_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {\n        var id, _yield$Resource$get, data;\n\n        return _Volumes_Out_codes_node_chestnut_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                id = _this4.$route.params.id;\n                _context3.next = 3;\n                return _api_resource__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(id);\n\n              case 3:\n                _yield$Resource$get = _context3.sent;\n                data = _yield$Resource$get.data;\n                _this4.item = flatten(data, _this4.columns);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    }\n  })\n});\n\n//# sourceURL=webpack:///./src/views/Editor.vue?./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options");

/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"619de646-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/Editor.vue?vue&type=template&id=7ef494b2&":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"619de646-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/views/Editor.vue?vue&type=template&id=7ef494b2& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return render; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"staticRenderFns\", function() { return staticRenderFns; });\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"el-row\",\n    [\n      _c(\n        \"el-card\",\n        [\n          _vm.item !== undefined\n            ? _c(\n                \"el-form\",\n                { attrs: { \"label-width\": \"80px\" } },\n                [\n                  _vm._l(_vm.columns, function(column) {\n                    return _c(\n                      \"el-form-item\",\n                      { key: column.name, attrs: { label: column.label } },\n                      [\n                        _c(\n                          column.component,\n                          _vm._b(\n                            {\n                              tag: \"component\",\n                              model: {\n                                value: _vm.item[column.name],\n                                callback: function($$v) {\n                                  _vm.$set(_vm.item, column.name, $$v)\n                                },\n                                expression: \"item[column.name]\"\n                              }\n                            },\n                            \"component\",\n                            column.attrs,\n                            false\n                          )\n                        )\n                      ],\n                      1\n                    )\n                  }),\n                  _c(\n                    \"el-form-item\",\n                    [\n                      _c(\n                        \"el-button\",\n                        { attrs: { type: \"success\" }, on: { click: _vm.save } },\n                        [_vm._v(\"保存\")]\n                      ),\n                      _c(\n                        \"el-button\",\n                        {\n                          on: {\n                            click: function($event) {\n                              return _vm.back()\n                            }\n                          }\n                        },\n                        [_vm._v(\"返回\")]\n                      )\n                    ],\n                    1\n                  )\n                ],\n                2\n              )\n            : _vm._e()\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\n\n\n//# sourceURL=webpack:///./src/views/Editor.vue?./node_modules/cache-loader/dist/cjs.js?%7B%22cacheDirectory%22:%22node_modules/.cache/vue-loader%22,%22cacheIdentifier%22:%22619de646-vue-loader-template%22%7D!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options");

/***/ }),

/***/ "./src/views/Editor.vue":
/*!******************************!*\
  !*** ./src/views/Editor.vue ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Editor_vue_vue_type_template_id_7ef494b2___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Editor.vue?vue&type=template&id=7ef494b2& */ \"./src/views/Editor.vue?vue&type=template&id=7ef494b2&\");\n/* harmony import */ var _Editor_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Editor.vue?vue&type=script&lang=js& */ \"./src/views/Editor.vue?vue&type=script&lang=js&\");\n/* empty/unused harmony star reexport *//* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ \"./node_modules/vue-loader/lib/runtime/componentNormalizer.js\");\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\n  _Editor_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  _Editor_vue_vue_type_template_id_7ef494b2___WEBPACK_IMPORTED_MODULE_0__[\"render\"],\n  _Editor_vue_vue_type_template_id_7ef494b2___WEBPACK_IMPORTED_MODULE_0__[\"staticRenderFns\"],\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (false) { var api; }\ncomponent.options.__file = \"src/views/Editor.vue\"\n/* harmony default export */ __webpack_exports__[\"default\"] = (component.exports);\n\n//# sourceURL=webpack:///./src/views/Editor.vue?");

/***/ }),

/***/ "./src/views/Editor.vue?vue&type=script&lang=js&":
/*!*******************************************************!*\
  !*** ./src/views/Editor.vue?vue&type=script&lang=js& ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_babel_loader_lib_index_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Editor_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib??vue-loader-options!./Editor.vue?vue&type=script&lang=js& */ \"./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/Editor.vue?vue&type=script&lang=js&\");\n/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__[\"default\"] = (_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_babel_loader_lib_index_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Editor_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[\"default\"]); \n\n//# sourceURL=webpack:///./src/views/Editor.vue?");

/***/ }),

/***/ "./src/views/Editor.vue?vue&type=template&id=7ef494b2&":
/*!*************************************************************!*\
  !*** ./src/views/Editor.vue?vue&type=template&id=7ef494b2& ***!
  \*************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_619de646_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Editor_vue_vue_type_template_id_7ef494b2___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"619de646-vue-loader-template\"}!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib??vue-loader-options!./Editor.vue?vue&type=template&id=7ef494b2& */ \"./node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"619de646-vue-loader-template\\\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/Editor.vue?vue&type=template&id=7ef494b2&\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_619de646_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Editor_vue_vue_type_template_id_7ef494b2___WEBPACK_IMPORTED_MODULE_0__[\"render\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"staticRenderFns\", function() { return _node_modules_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_619de646_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Editor_vue_vue_type_template_id_7ef494b2___WEBPACK_IMPORTED_MODULE_0__[\"staticRenderFns\"]; });\n\n\n\n//# sourceURL=webpack:///./src/views/Editor.vue?");

/***/ })

}]);